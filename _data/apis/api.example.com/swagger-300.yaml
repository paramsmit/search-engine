---
swagger: "2.0"
info: !php/object "O:8:\"stdClass\":3:{s:7:\"version\";s:5:\"1.0.0\";s:5:\"title\";s:21:\"$RestApiResourceName$\";s:11:\"description\";s:70:\"API
  for the $ResourceGroupName$ service ($DeploymentName$ deployment).\";}"
paths:
  /service/status:
    get:
      description: Returns the service's status. Useful for testing connectivity.
      responses:
        200:
          description: A successful service status response.
          schema:
            $ref: '#/definitions/ServiceStatus'
  /events:
    get:
      description: Get the most recent events.
      parameters:
      - description: The identifier for the run whose events you want to retrieve
        name: run_id
        in: query
        required: false
        type: string
      - description: The time of the most recent event you received
        name: time
        in: query
        required: false
        type: integer
      responses:
        200:
          description: A successful event fetch.
          schema:
            $ref: '#/definitions/Events'
  /clear:
    post:
      description: Clears the build log.
      parameters: []
      responses:
        200:
          description: A successful clear command.
          schema:
            format: boolean
  /status:
    get:
      description: Retrieves status of the current run.
      parameters:
      - description: the workflow execution ID to retrieve information for
        name: workflow_id
        in: query
        required: false
        type: string
      responses:
        200:
          description: status of the current run
          schema:
            $ref: '#/definitions/RunResult'
  /run:
    post:
      description: Runs the build farm.
      parameters:
      - description: configurations for the Simple Workflow
        name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/RunParams'
      responses:
        200:
          description: A successful run command.
          schema:
            format: string
  /cancel:
    post:
      description: Cancels a running build.
      parameters:
      - description: workflow ID to cancel
        name: workflow_id
        in: body
        required: true
        schema:
          type: string
      responses:
        200:
          description: A successful cancel command.
          schema:
            format: string
  /builds:
    get:
      description: Get a list of existing build IDs.
      parameters: []
      responses:
        200:
          description: A successful build list fetch.
          schema:
            $ref: '#/definitions/BuildsResult'
  /example:
    get:
      description: Example API that can be called by the game client to get data.
      responses:
        200:
          description: A successful example response.
          schema:
            $ref: '#/definitions/ExampleData'
    post:
      description: Example API that can be called by the game client to process data.
      parameters:
      - name: data
        in: body
        required: true
        schema:
          $ref: '#/definitions/ExampleData'
      responses:
        200:
          description: A successful example response.
          schema:
            $ref: '#/definitions/ExampleData'
  /amis:
    get:
      description: Get the user's private AMIs.
      responses:
        200:
          description: A successful ami fetch.
          schema:
            $ref: '#/definitions/AMIs'
  /keypairs:
    get:
      description: Get the user's EC2 key pairs.
      responses:
        200:
          description: A successful key pair fetch.
          schema:
            $ref: '#/definitions/keypairs'
  /fleetconfig:
    get:
      description: Get the fleet configuration.
      responses:
        200:
          description: A successful fleet configuration fetch.
          schema:
            $ref: '#/definitions/FleetConfiguration'
    post:
      description: Save the fleet configuration.
      parameters:
      - name: config
        in: body
        required: true
        schema:
          $ref: '#/definitions/FleetConfiguration'
      responses:
        200:
          description: A successful post response.
          schema:
            $ref: '#/definitions/ServiceStatus'
  /autoscaling/config:
    post:
      description: Create the autoscaling launch configuration.
      parameters:
      - name: config
        in: body
        required: true
        schema:
          $ref: '#/definitions/AutoscalingLaunchConfiguration'
      responses:
        200:
          description: A successful post response.
          schema:
            $ref: '#/definitions/ServiceStatus'
  /autoscaling/config/{name}:
    delete:
      description: Delete the current launch configuration
      parameters:
      - description: The name of the current launch configuration.
        name: name
        in: path
        required: true
        type: string
      responses:
        200:
          description: A successful delete response.
          schema:
            $ref: '#/definitions/ServiceStatus'
  /autoscaling/autoscalinggroup:
    post:
      description: Create an Auto Scaling group.
      parameters:
      - name: config
        in: body
        required: true
        schema:
          $ref: '#/definitions/AutoscalingGroupConfiguration'
      responses:
        200:
          description: A successful post response.
          schema:
            $ref: '#/definitions/ServiceStatus'
  /autoscaling/autoscalinggroup/{name}:
    delete:
      description: Delete the current fleet
      parameters:
      - description: The name of the current fleet.
        name: name
        in: path
        required: true
        type: string
      responses:
        200:
          description: A successful delete response.
          schema:
            $ref: '#/definitions/ServiceStatus'
produces:
- application/json
schemes:
- https
definitions: !php/object "O:8:\"stdClass\":14:{s:13:\"ServiceStatus\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":1:{s:6:\"status\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}}s:8:\"required\";a:1:{i:0;s:6:\"status\";}}s:5:\"Error\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":2:{s:9:\"errorCode\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}s:12:\"errorMessage\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}}s:8:\"required\";a:2:{i:0;s:9:\"errorCode\";i:1;s:12:\"errorMessage\";}}s:11:\"ExampleData\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":2:{s:16:\"ExamplePropertyA\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}s:16:\"ExamplePropertyB\";O:8:\"stdClass\":1:{s:4:\"type\";s:7:\"integer\";}}s:8:\"required\";a:2:{i:0;s:16:\"ExamplePropertyA\";i:1;s:16:\"ExamplePropertyB\";}}s:6:\"Events\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":2:{s:6:\"events\";O:8:\"stdClass\":2:{s:4:\"type\";s:5:\"array\";s:5:\"items\";O:8:\"stdClass\":1:{s:4:\"$ref\";s:23:\"#/definitions/EventItem\";}}s:6:\"run-id\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}}}s:9:\"EventItem\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":8:{s:6:\"run-id\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}s:8:\"event-id\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}s:7:\"host-id\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}s:9:\"timestamp\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}s:8:\"activity\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}s:4:\"desc\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}s:6:\"status\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}s:4:\"path\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}}}s:9:\"RunResult\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":0:{}}s:12:\"BuildsResult\";O:8:\"stdClass\":2:{s:4:\"type\";s:5:\"array\";s:5:\"items\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":0:{}}}s:9:\"RunParams\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":2:{s:11:\"workflow_id\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}s:10:\"run_params\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}}}s:4:\"AMIs\";O:8:\"stdClass\":2:{s:4:\"type\";s:5:\"array\";s:5:\"items\";O:8:\"stdClass\":1:{s:4:\"$ref\";s:21:\"#/definitions/AMIItem\";}}s:7:\"AMIItem\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":0:{}}s:8:\"keypairs\";O:8:\"stdClass\":2:{s:4:\"type\";s:5:\"array\";s:5:\"items\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}}s:18:\"FleetConfiguration\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":0:{}}s:30:\"AutoscalingLaunchConfiguration\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":0:{}}s:29:\"AutoscalingGroupConfiguration\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":0:{}}}"
...
