---
swagger: "2.0"
info: !php/object "O:8:\"stdClass\":4:{s:5:\"title\";s:32:\"Edge Application Agent
  Interface\";s:7:\"version\";s:3:\"1.0\";s:7:\"contact\";O:8:\"stdClass\":3:{s:4:\"name\";s:10:\"Smart
  Edge\";s:3:\"url\";s:27:\"github.com/smartedgemec/eaa\";s:5:\"email\";s:22:\"support@smart-edge.com\";}s:7:\"license\";O:8:\"stdClass\":2:{s:4:\"name\";s:18:\"Apache
  2.0 License\";s:3:\"url\";s:55:\"https://github.com/smartedgemec/eaa/blob/master/LICENSE\";}}"
paths:
  /notifications:
    get:
      summary: Connection Establishment
      description: Connect to a secure WebSocket to receive streaming notifications
        (see reference for notification to consumer for schema of messages received
        on websocket).
      operationId: GetNotifications
      responses:
        101:
          description: Upgrade to Websockets
          schema: []
        403:
          description: Unauthorized
          schema: []
      tags:
      - Eaa
    post:
      summary: Publish Notification
      description: Push a single notification to all subscribed applications.
      operationId: PushNotificationToSubscribers
      responses:
        202:
          description: Notification was received and will be forwarded
          schema: []
        403:
          description: Unauthorized
          schema: []
      parameters:
      - name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/eaaNotificationFromProducer'
      tags:
      - Eaa
  /services:
    get:
      summary: Service Discovery
      description: List all currently activated producers on the local appliance and
        get their status, subscribable notification types, and address (for services
        with their own exposed API).
      operationId: GetServices
      responses:
        200:
          description: Services currently activated by a producer
          schema:
            type: array
            items:
              $ref: '#/definitions/eaaService'
        403:
          description: Unauthorized
          schema: []
      tags:
      - Eaa
    delete:
      summary: Service Deactivation
      description: Unregisters a producer for all of its notification types in the
        local MEC environment. Once a producer has been unregistered, it will need
        to be registered and consumers will need to subscribe using the new service
        ID for notifications to be delivered.
      operationId: DeregisterApplication
      responses:
        204:
          description: Service registration removed
          schema: []
        403:
          description: Unauthorized
          schema: []
      tags:
      - Eaa
    post:
      summary: Service Activation
      description: Registers a producer to begin publishing notifications in the local
        MEC environment.
      operationId: RegisterApplication
      responses:
        200:
          description: OK
          schema:
            properties: []
        400:
          description: Invalid content, a required property is missing
          schema: []
        403:
          description: Unauthorized
          schema: []
      parameters:
      - name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/eaaService'
      tags:
      - Eaa
  /subscriptions:
    get:
      summary: List Subscriptions
      description: List all producers currently subscribed to and their registered
        notification types.
      operationId: GetSubscriptions
      responses:
        200:
          description: Subscriptions currently active
          schema:
            type: array
            items:
              $ref: '#/definitions/eaaSubscription'
        400:
          description: Invalid content, a required property is missing
          schema: []
        403:
          description: Unauthorized
          schema: []
      tags:
      - Eaa
    delete:
      summary: Mass Unsubscription
      description: Unsubscribe from all producers except the platform defaults (reset
        to default).
      operationId: UnsubscribeAllNotifications
      responses:
        204:
          description: Non-default subscriptions removed
          schema: []
        403:
          description: Unauthorized
          schema: []
      tags:
      - Eaa
  /subscriptions/{urn.namespace}:
    delete:
      summary: Service Unsubscription
      description: Unsubscribe from a particular or entire namespace of producers.
      operationId: UnsubscribeNotifications
      responses:
        204:
          description: Subscription removed
          schema: []
        403:
          description: Unauthorized
          schema: []
      parameters:
      - name: urn.namespace
        description: The non-unique portion of the URN that identifies the class excluding
          antrailing separator.
        in: path
        required: true
        type: string
      - name: urn.id
        description: The per-namespace unique portion of the URN that when appended
          to thennamespace with a separator forms the complete URN.
        in: query
        required: false
        type: string
      tags:
      - Eaa
    post:
      summary: Service Subscription
      description: Subscribe to a set of notification types, optionally specifying
        the exact producer by URN.
      operationId: SubscribeNotifications
      responses:
        201:
          description: Subscription added
          schema: []
        403:
          description: Unauthorized
          schema: []
      parameters:
      - name: urn.namespace
        description: The non-unique portion of the URN that identifies the class excluding
          antrailing separator.
        in: path
        required: true
        type: string
      - name: body
        description: The list of all notification types registered by all producers
          in thisnnamespace.
        in: body
        required: true
        schema:
          type: array
          items:
            $ref: '#/definitions/eaaNotificationDescriptor'
      tags:
      - Eaa
  /subscriptions/{urn.namespace}/{urn.id}:
    delete:
      summary: Service Unsubscription
      description: Unsubscribe from a particular or entire namespace of producers.
      operationId: UnsubscribeNotifications2
      responses:
        204:
          description: Subscription removed
          schema: []
        403:
          description: Unauthorized
          schema: []
      parameters:
      - name: urn.namespace
        description: The non-unique portion of the URN that identifies the class excluding
          antrailing separator.
        in: path
        required: true
        type: string
      - name: urn.id
        description: The per-namespace unique portion of the URN that when appended
          to thennamespace with a separator forms the complete URN.
        in: path
        required: true
        type: string
      tags:
      - Eaa
    post:
      summary: Service Subscription
      description: Subscribe to a set of notification types, optionally specifying
        the exact producer by URN.
      operationId: SubscribeNotifications2
      responses:
        201:
          description: Subscription added
          schema: []
        403:
          description: Unauthorized
          schema: []
      parameters:
      - name: urn.namespace
        description: The non-unique portion of the URN that identifies the class excluding
          antrailing separator.
        in: path
        required: true
        type: string
      - name: urn.id
        description: The per-namespace unique portion of the URN that when appended
          to thennamespace with a separator forms the complete URN.
        in: path
        required: true
        type: string
      - name: body
        description: The list of all notification types registered by all producers
          in thisnnamespace.
        in: body
        required: true
        schema:
          type: array
          items:
            $ref: '#/definitions/eaaNotificationDescriptor'
      tags:
      - Eaa
produces:
- application/json
schemes:
- https
definitions: !php/object "O:8:\"stdClass\":9:{s:25:\"eaaNotificationDescriptor\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":3:{s:4:\"name\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"string\";s:5:\"title\";s:33:\"Name
  of notification message type\";}s:7:\"version\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"string\";s:5:\"title\";s:36:\"Version
  of notification message type\";s:7:\"pattern\";s:117:\"^((([0-9]+)\\.([0-9]+)\\.([0-9]+)(?:-([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?)(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?)$\";}s:11:\"description\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"string\";s:5:\"title\";s:42:\"Human
  readable description of message type\";}}s:5:\"title\";s:23:\"Notification descriptor\";}s:27:\"eaaNotificationFromProducer\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":3:{s:4:\"name\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"string\";s:5:\"title\";s:25:\"Name
  of notification type\";}s:7:\"version\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"string\";s:5:\"title\";s:28:\"Version
  of notification type\";s:7:\"pattern\";s:117:\"^((([0-9]+)\\.([0-9]+)\\.([0-9]+)(?:-([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?)(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?)$\";}s:7:\"payload\";O:8:\"stdClass\":2:{s:4:\"$ref\";s:30:\"#/definitions/eaaRawJSONObject\";s:11:\"description\";s:75:\"The
  payload can be any JSON object with a name and version-specific schema.\";}}s:5:\"title\";s:36:\"Notification
  payload (from producer)\";}s:25:\"eaaNotificationToConsumer\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":4:{s:4:\"name\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"string\";s:5:\"title\";s:25:\"Name
  of notification type\";}s:7:\"version\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"string\";s:5:\"title\";s:28:\"Version
  of notification type\";s:7:\"pattern\";s:117:\"^((([0-9]+)\\.([0-9]+)\\.([0-9]+)(?:-([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?)(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?)$\";}s:7:\"payload\";O:8:\"stdClass\":2:{s:4:\"$ref\";s:30:\"#/definitions/eaaRawJSONObject\";s:11:\"description\";s:75:\"The
  payload can be any JSON object with a name and version-specific schema.\";}s:3:\"urn\";O:8:\"stdClass\":2:{s:4:\"$ref\";s:20:\"#/definitions/eaaURN\";s:11:\"description\";s:161:\"Namespace
  and id of the producer that notification comes from. Used only\nwhen sending notification
  from EAA to consumer. Producer do not have to\nfill this field.\";}}s:5:\"title\";s:36:\"Notification
  payload (to subscriber)\";}s:16:\"eaaRawJSONObject\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"object\";s:5:\"title\";s:10:\"Any
  object\";}s:10:\"eaaService\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":5:{s:3:\"urn\";O:8:\"stdClass\":3:{s:4:\"$ref\";s:20:\"#/definitions/eaaURN\";s:5:\"title\";s:24:\"Name
  of the producer app\";s:8:\"readOnly\";b:1;}s:11:\"description\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"string\";s:5:\"title\";s:47:\"Human
  readable description provided by producer\";}s:12:\"endpoint_uri\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"string\";s:5:\"title\";s:27:\"URI
  for API of external app\";}s:6:\"status\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"string\";s:5:\"title\";s:13:\"Health
  status\";s:8:\"readOnly\";b:1;}s:13:\"notifications\";O:8:\"stdClass\":3:{s:4:\"type\";s:5:\"array\";s:5:\"items\";O:8:\"stdClass\":1:{s:4:\"$ref\";s:39:\"#/definitions/eaaNotificationDescriptor\";}s:5:\"title\";s:40:\"Notitication
  types that will be produced\";}}s:5:\"title\";s:7:\"Service\";}s:14:\"eaaServiceList\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":1:{s:8:\"services\";O:8:\"stdClass\":3:{s:4:\"type\";s:5:\"array\";s:5:\"items\";O:8:\"stdClass\":1:{s:4:\"$ref\";s:24:\"#/definitions/eaaService\";}s:5:\"title\";s:42:\"Services
  currently activated by a producer\";}}s:5:\"title\";s:12:\"Service List\";}s:15:\"eaaSubscription\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":2:{s:3:\"urn\";O:8:\"stdClass\":2:{s:4:\"$ref\";s:20:\"#/definitions/eaaURN\";s:11:\"description\";s:137:\"The
  name of the producer app. The unique ID is optional for subscribing\nand if not
  given will subscribe to any producer in the namespace.\";}s:13:\"notifications\";O:8:\"stdClass\":3:{s:4:\"type\";s:5:\"array\";s:5:\"items\";O:8:\"stdClass\":1:{s:4:\"$ref\";s:39:\"#/definitions/eaaNotificationDescriptor\";}s:11:\"description\";s:81:\"The
  list of all notification types registered by all producers in this\nnamespace.\";}}s:5:\"title\";s:12:\"Subscription\";}s:19:\"eaaSubscriptionList\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":1:{s:13:\"subscriptions\";O:8:\"stdClass\":3:{s:4:\"type\";s:5:\"array\";s:5:\"items\";O:8:\"stdClass\":1:{s:4:\"$ref\";s:29:\"#/definitions/eaaSubscription\";}s:5:\"title\";s:30:\"Subscriptions
  currently active\";}}s:5:\"title\";s:17:\"Subscription List\";}s:6:\"eaaURN\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":2:{s:2:\"id\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"string\";s:11:\"description\";s:120:\"The
  per-namespace unique portion of the URN that when appended to the\nnamespace with
  a separator forms the complete URN.\";}s:9:\"namespace\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"string\";s:11:\"description\";s:91:\"The
  non-unique portion of the URN that identifies the class excluding a\ntrailing separator.\";}}s:5:\"title\";s:21:\"Uniform
  Resource Name\";}}"
...
