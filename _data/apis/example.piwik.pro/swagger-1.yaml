---
swagger: "2.0"
info: !php/object "O:8:\"stdClass\":2:{s:5:\"title\";s:18:\"Access Control Api\";s:7:\"version\";s:4:\"auto\";}"
host: example.piwik.pro
paths:
  /api/access-control/v2/entry/{entityId}:
    get:
      tags:
      - AccessControl v2
      summary: Entity actions
      description: Returns granted permissions (actions) to given entity for current
        user.
      operationId: get_entity_actions_v2
      produces:
      - application/vnd.api+json
      parameters:
      - $ref: '#/parameters/Entity_Id'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/Entity_Actions_Get_Response'
        400:
          description: Bad Request
        403:
          description: Forbidden
  /api/access-control/v2/entry/{entity}/action/{action}:
    get:
      tags:
      - AccessControl v2
      summary: Entity actions for users
      description: Returns users with granted permissions (actions) to given entity.
      operationId: get_entities_with_action_v2
      produces:
      - application/vnd.api+json
      parameters:
      - $ref: '#/parameters/Entity'
      - name: action
        in: path
        description: Action of the entity
        type: string
        required: true
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/Entity_Actions_Get_Users_Response'
        400:
          description: Bad Request
        403:
          description: Forbidden
  /api/access-control/v2/entry/groups/{entity}/{entityId}:
    get:
      tags:
      - AccessControl v2
      summary: Permission groups
      description: Returns permission groups that have masks which are a subset of
        permission mask for entries of given type.
      operationId: get_permission_groups_v2
      produces:
      - application/vnd.api+json
      parameters:
      - $ref: '#/parameters/Entity'
      - $ref: '#/parameters/Entity_Id'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/Permission_Group_Get_Response'
        400:
          description: Bad Request
        403:
          description: Forbidden
  /api/access-control/v2/entry/group:
    post:
      tags:
      - AccessControl v2
      summary: Permission group set
      description: It sets permission group for given entity (user or app).
      operationId: set_permission_group_v2
      parameters:
      - name: permission group request
        in: body
        description: set permission group
        required: true
        schema:
          type: object
          properties:
            data:
              $ref: '#/definitions/Permission_Group_Set_Request'
      responses:
        204:
          description: No Content
        400:
          description: Bad Request
        403:
          description: Forbidden
  /api/access-control/v2/global/actions:
    get:
      tags:
      - AccessControl v2
      summary: Global actions
      description: It gets actions without specific entity context for given user.
      operationId: get_global_actions_v2
      produces:
      - application/vnd.api+json
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/Global_Actions_Get_Response'
        400:
          description: Bad Request
        403:
          description: Forbidden
schemes:
- https
definitions: !php/object "O:8:\"stdClass\":8:{s:10:\"JsonApi_Id\";O:8:\"stdClass\":4:{s:4:\"type\";s:6:\"string\";s:6:\"format\";s:4:\"uuid\";s:11:\"description\";s:11:\"Resource
  ID\";s:7:\"example\";s:36:\"985ed9d7-b652-47b8-b9cf-c17d62735261\";}s:12:\"JsonApi_Type\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"string\";s:11:\"description\";s:39:\"Resource
  type, unique across whole PPMS\";s:7:\"example\";s:9:\"ppms/user\";}s:23:\"JsonApi_Resource_Object\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":3:{s:4:\"type\";O:8:\"stdClass\":1:{s:4:\"$ref\";s:26:\"#/definitions/JsonApi_Type\";}s:2:\"id\";O:8:\"stdClass\":1:{s:4:\"$ref\";s:24:\"#/definitions/JsonApi_Id\";}s:10:\"attributes\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"object\";}}}s:27:\"Entity_Actions_Get_Response\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":1:{s:4:\"data\";O:8:\"stdClass\":1:{s:5:\"allOf\";a:2:{i:0;O:8:\"stdClass\":1:{s:4:\"$ref\";s:37:\"#/definitions/JsonApi_Resource_Object\";}i:1;O:8:\"stdClass\":1:{s:10:\"properties\";O:8:\"stdClass\":1:{s:10:\"attributes\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":1:{s:7:\"actions\";O:8:\"stdClass\":3:{s:4:\"type\";s:5:\"array\";s:5:\"items\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}s:11:\"description\";s:42:\"List
  of available actions for given entity\";}}}}}}}}s:7:\"example\";O:8:\"stdClass\":1:{s:4:\"data\";O:8:\"stdClass\":3:{s:4:\"type\";s:30:\"ppms/permission/entity/actions\";s:2:\"id\";s:36:\"50fca71a-e4a7-4480-a612-a9ffbdf0935f\";s:10:\"attributes\";O:8:\"stdClass\":1:{s:7:\"actions\";a:5:{i:0;s:4:\"view\";i:1;s:4:\"edit\";i:2;s:7:\"publish\";i:3;s:6:\"delete\";i:4;s:6:\"manage\";}}}}}s:33:\"Entity_Actions_Get_Users_Response\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":2:{s:4:\"meta\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"object\";s:11:\"description\";s:16:\"Meta
  information\";s:10:\"properties\";O:8:\"stdClass\":1:{s:5:\"total\";O:8:\"stdClass\":2:{s:4:\"type\";s:7:\"integer\";s:11:\"description\";s:23:\"Number
  of records found\";}}}s:4:\"data\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"object\";s:5:\"allOf\";a:2:{i:0;O:8:\"stdClass\":1:{s:4:\"$ref\";s:37:\"#/definitions/JsonApi_Resource_Object\";}i:1;O:8:\"stdClass\":1:{s:10:\"properties\";O:8:\"stdClass\":1:{s:10:\"attributes\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":1:{s:7:\"actions\";O:8:\"stdClass\":3:{s:4:\"type\";s:5:\"array\";s:5:\"items\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}s:11:\"description\";s:42:\"List
  of available actions for given entity\";}}}}}}}}s:7:\"example\";O:8:\"stdClass\":2:{s:4:\"meta\";O:8:\"stdClass\":1:{s:5:\"total\";i:2;}s:4:\"data\";a:2:{i:0;O:8:\"stdClass\":3:{s:2:\"id\";s:36:\"e0180272-d1f5-4bb5-a7d3-0f1a138eacd5\";s:4:\"type\";s:22:\"ppms/permission/entity\";s:10:\"attributes\";O:8:\"stdClass\":1:{s:10:\"entityType\";s:8:\"ppms/app\";}}i:1;O:8:\"stdClass\":3:{s:2:\"id\";s:36:\"ccc9c3a4-fd65-4755-900f-2590460aff44\";s:4:\"type\";s:22:\"ppms/permission/entity\";s:10:\"attributes\";O:8:\"stdClass\":1:{s:10:\"entityType\";s:8:\"ppms/app\";}}}}}s:29:\"Permission_Group_Get_Response\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":1:{s:4:\"data\";O:8:\"stdClass\":1:{s:5:\"allOf\";a:2:{i:0;O:8:\"stdClass\":1:{s:4:\"$ref\";s:37:\"#/definitions/JsonApi_Resource_Object\";}i:1;O:8:\"stdClass\":1:{s:10:\"properties\";O:8:\"stdClass\":1:{s:10:\"attributes\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":1:{s:11:\"permissions\";O:8:\"stdClass\":3:{s:4:\"type\";s:5:\"array\";s:5:\"items\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}s:11:\"description\";s:42:\"List
  of available actions for given entity\";}}}}}}}}s:7:\"example\";O:8:\"stdClass\":1:{s:4:\"data\";a:1:{i:0;O:8:\"stdClass\":3:{s:4:\"type\";s:21:\"ppms/permissions/user\";s:2:\"id\";s:36:\"8275cf58-93db-4cda-9d11-7262376c2c72\";s:10:\"attributes\";O:8:\"stdClass\":1:{s:11:\"permissions\";a:1:{i:0;s:9:\"no-access\";}}}}}}s:28:\"Permission_Group_Set_Request\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":2:{s:4:\"type\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"string\";s:4:\"enum\";a:1:{i:0;s:22:\"ppms/permissions/group\";}}s:10:\"attributes\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":4:{s:6:\"entity\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"string\";s:4:\"enum\";a:1:{i:0;s:8:\"ppms/app\";}}s:8:\"entityId\";O:8:\"stdClass\":4:{s:4:\"type\";s:6:\"string\";s:6:\"format\";s:4:\"uuid\";s:11:\"description\";s:33:\"UUIDv4
  identifier of given entity\";s:7:\"example\";s:36:\"94445dcb-4da3-4e24-9f7b-c685aacc5a2a\";}s:5:\"group\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"string\";s:4:\"enum\";a:6:{i:0;s:9:\"no_access\";i:1;s:4:\"view\";i:2;s:4:\"edit\";i:3;s:7:\"publish\";i:4;s:6:\"delete\";i:5;s:6:\"manage\";}}s:12:\"targetUserId\";O:8:\"stdClass\":4:{s:4:\"type\";s:6:\"string\";s:6:\"format\";s:4:\"uuid\";s:11:\"description\";s:56:\"UUIDv4
  identifier of user which will recieve permissions\";s:7:\"example\";s:36:\"94445dcb-4da3-4e24-9f7b-c685aacc5a2a\";}}}}s:7:\"example\";O:8:\"stdClass\":2:{s:4:\"type\";s:22:\"ppms/permissions/group\";s:10:\"attributes\";O:8:\"stdClass\":4:{s:6:\"entity\";s:8:\"ppms/app\";s:8:\"entityId\";s:36:\"50fca71a-e4a7-4480-a612-a9ffbdf0935f\";s:5:\"group\";s:6:\"manage\";s:12:\"targetUserId\";s:36:\"8275cf58-93db-4cda-9d11-7262376c2c72\";}}}s:27:\"Global_Actions_Get_Response\";O:8:\"stdClass\":3:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":1:{s:4:\"data\";O:8:\"stdClass\":1:{s:5:\"allOf\";a:2:{i:0;O:8:\"stdClass\":1:{s:4:\"$ref\";s:37:\"#/definitions/JsonApi_Resource_Object\";}i:1;O:8:\"stdClass\":1:{s:10:\"properties\";O:8:\"stdClass\":1:{s:10:\"attributes\";O:8:\"stdClass\":2:{s:4:\"type\";s:6:\"object\";s:10:\"properties\";O:8:\"stdClass\":1:{s:11:\"permissions\";O:8:\"stdClass\":3:{s:4:\"type\";s:5:\"array\";s:5:\"items\";O:8:\"stdClass\":1:{s:4:\"type\";s:6:\"string\";}s:11:\"description\";s:46:\"List
  of global permissions for authorized user\";}}}}}}}}s:7:\"example\";O:8:\"stdClass\":1:{s:4:\"data\";O:8:\"stdClass\":3:{s:2:\"id\";s:9:\"ppms/user\";s:4:\"type\";s:23:\"ppms/permissions/global\";s:10:\"attributes\";O:8:\"stdClass\":1:{s:11:\"permissions\";a:2:{i:0;s:6:\"delete\";i:1;s:4:\"edit\";}}}}}}"
...
