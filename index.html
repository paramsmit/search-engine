---
layout: default
title: API Search Engine
---

<style>
	.values{
	padding: 10px;
	margin: 5px;
  background: #FFF;
	border: 1px solid #000;
	border-top-right-radius:15px;
	border-top-left-radius:15px;
	border-bottom-right-radius:15px;
	border-bottom-left-radius:15px;
	}

	.urlnav{
	display: inline;
	padding-right: 10px;
	padding-left: 10px;
	}

	.search-bar input{
	  width: 100%;
	}
</style>
<!-- News -->
<a name="Search"></a>
{% assign search = site.data.apis | sort %}
<section>
	<header>
		<h2>API Search</h2>
	</header>
	<form class="form-inline">
		<div class="search-bar">
		  <input type="text" id="seeker">
		</div>
		<div id="content"></div>
	</form>
</section>

{% assign search_index = site.data.apis | sort | jsonify %}

<script>

	function convertCase(str) {
	  var lower = String(str).toLowerCase();
	  return lower.replace(/(^| )(\w)/g, function(x) {
	    return x.toUpperCase();
	  });
	}

	function followLink(url){
		location.href = url;
	}

	var items = {{ search_index }}

	/* SEEKER FUNCTION */
	 if (!RegExp.escape) {
	   RegExp.escape = function (s) {
	     return s.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
	   };
	 }

	 jQuery(function(){

	  var $rows = $('.values');

	  $('#seeker').keyup(function () {

			query = $('#seeker').val();
			console.log("searching..."+query);

			output = "";
			$.each(items, function(key, val){
				$.each(val, function(key2, val2){
				if(val2.apis){

					//console.log('2: ' + JSON.stringify(val2.apis));

					name = val2.apis.name;
					description = val2.apis.description;
					common = val2.apis['x-common'];
					slug = val2.apis['x-slug'];
					common.sort();

					var name_search = name.toLowerCase();
					var description_search = description.toLowerCase();
					var query_search = query.toLowerCase();
					if(name_search.includes(query_search) || description_search.includes(query_search)){
						output += '<div class="values">';
					  output += '<h5 class="value-id">' + name + '</h5>';
					  output += '<p class="value-description">' + description + '</p>';
						output += '<p align="center"><strong>Links:</strong><select id="' + slug + '-links" style="text-align:center; width: 250px;" name="links">';
						for (i = 0; i < common.length; i++) {
							url = common[i].url;
							type = common[i].type;
							type = type.replace("x-",'');
							type = type.split("-").join(" ").toLowerCase();
							type = convertCase(type);
							output += '<option><a href="' + url + '">' + type + '</a></option>';
						}
						output += '</select><button onclick="location.href=&apos;' + url + '&apos;" type="button" class="btn btn-default">Go</button></p>';
					  output += "</div>";
					}

					}
				});
			});

			$('#content').html(output);


	  });

	});
</script>
